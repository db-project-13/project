{% extends "layout/base.html" %}

{% block title %}회원정보 수정{% endblock %}

{% block content %}
<div class="container py-4">
  <h1 class="mb-4">회원정보 수정</h1>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <div class="card">
    <div class="card-body">
      <form method="post" action="{{ url_for('member.profile_edit') }}">
        <!-- 아이디/이름은 수정 불가, 보기만 -->
        <div class="mb-3">
          <label class="form-label">아이디</label>
          <input
            type="text"
            class="form-control"
            value="{{ member.id }}"
            disabled
          />
        </div>

        <div class="mb-3">
          <label class="form-label">이름</label>
          <input
            type="text"
            class="form-control"
            value="{{ member.name }}"
            disabled
          />
        </div>

        <!-- 비밀번호 변경 (선택) -->
        <div class="mb-3">
          <label for="password" class="form-label">새 비밀번호 (변경 시에만 입력)</label>
          <input
            type="password"
            class="form-control"
            id="password"
            name="password"
            placeholder="변경하지 않으려면 비워두세요"
          />
        </div>

        <!-- 주소 -->
        <div class="mb-3">
          <label for="address" class="form-label">주소</label>
          <input
            type="text"
            class="form-control"
            id="address"
            name="address"
            value="{{ member.address or '' }}"
          />
        </div>

        <!-- 성별 -->
        <div class="mb-3">
          <label for="sex" class="form-label">성별</label>
          <select class="form-select" id="sex" name="sex">
            <option value="" {% if not member.sex %}selected{% endif %}>선택 안 함</option>
            <option value="M" {% if member.sex == "M" %}selected{% endif %}>남성</option>
            <option value="F" {% if member.sex == "F" %}selected{% endif %}>여성</option>
          </select>
        </div>

        <!-- 생년월일 -->
        <div class="mb-3">
          <label for="birthday" class="form-label">생년월일</label>
          <input
            type="date"
            class="form-control"
            id="birthday"
            name="birthday"
            value="{% if member.birthday %}{{ member.birthday.strftime('%Y-%m-%d') }}{% endif %}"
          />
        </div>

        <div class="d-flex justify-content-between">
          <a href="{{ url_for('member.profile') }}" class="btn btn-secondary">
            취소
          </a>
          <button type="submit" class="btn btn-primary">
            저장
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
